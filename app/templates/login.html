{% extends 'layout.html' %}

{% block title %}ë¡œê·¸ì¸ - UP & down{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="card auth-card">
        <div class="card-header">ë¡œê·¸ì¸</div>
        <div class="card-body">
        <form method="POST" action="{{ url_for('users_login_bp.login') }}">
            <label for="login-id">ì•„ì´ë””</label>
            <input type="text" id="login-id" name="userid" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required />

            <label for="login-pw">ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="login-pw" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required />

            <button type="submit" class="btn btn-primary full">ë¡œê·¸ì¸</button>
        </form>
        <p class="auth-link">ì•„ì§ íšŒì›ì´ ì•„ë‹ˆì‹ ê°€ìš”? <a href="{{ url_for('users_signup_bp.signup') }}">íšŒì›ê°€ì…</a></p>
        </div>
    </div>
</div>

<!-- ëª¨ë‹¬ ì•Œë¦¼ì°½ -->
<div id="alertModal" class="modal">
    <div class="modal-content">
        <p id="alertMessage">ì—ëŸ¬ ë©”ì‹œì§€</p>
        <button onclick="closeModal()">í™•ì¸</button>
    </div>
</div>

<div id="successModal" class="modal">
    <div class="modal-content">
        <h2>íšŒì›ê°€ì… ì™„ë£Œ ğŸ‰</h2>
        <p>ì´ì œ ë¡œê·¸ì¸í•´ ì£¼ì„¸ìš”.</p>
        <button onclick="closeModal()">í™•ì¸</button>
    </div>
</div>

<script>
    function showModal(message) {
        document.getElementById('alertMessage').textContent = message;
        document.getElementById('alertModal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('alertModal').style.display = 'none';
        document.getElementById('successModal').style.display = 'none';
        history.replaceState(null, "", location.pathname);
    }

    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    window.onload = function () {
        if (getQueryParam("success") === "1") {
        document.getElementById("successModal").style.display = "flex";
        }

        {% if error %}
        showModal("{{ error }}");
        {% endif %}
    };
</script>
{% endblock %}
