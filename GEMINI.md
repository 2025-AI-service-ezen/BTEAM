
# Gemini 개발 가이드

이 문서는 AI 어시스턴트 Gemini가 이 프로젝트를 효과적으로 이해하고 개발을 지원하기 위한 가이드입니다.

## 1. 프로젝트 목표 및 비전

- **핵심 목표:** 데이터 기반의 뉴스 감성 분석을 통해 주가 변동을 예측하고, 다양한 예측 모델의 성능을 비교 분석하여 사용자에게 신뢰성 있는 투자 의사결정 지원 데이터를 제공하는 것.
- **장기 비전:** 개인화된 투자 추천, 포트폴리오 관리, 자동화된 투자 전략 제안 등 종합적인 AI 투자 비서 플랫폼으로 발전시키는 것.

## 2. 아키텍처 및 설계 원칙

- **구조:** Flask를 중심으로 한 모듈형 블루프린트(Blueprint) 구조를 따릅니다. 각 기능은 `routes`, `services`, `models`로 명확히 분리합니다.
- **데이터 흐름 (3단계 프로젝트 계획 반영):**
    1.  **데이터 수집:** 외부 뉴스 크롤링 및 주가 데이터 수집 (현재는 CSV 및 DB 혼용, DB로 일원화 예정)
    2.  **1단계: 상관관계 기반 감성 사전 구축:** 수집된 뉴스 텍스트와 주가 변동 간의 상관관계를 분석하여 감성 사전을 생성합니다.
    3.  **2단계: 가중치 기반 주가 예측 모델 구성:** 구축된 감성 사전을 활용하여 뉴스 감성 점수를 계산하고, 이를 주가 정보와 결합하여 예측 모델을 학습합니다.
    4.  **3단계: 예측 모델 비교 분석:** 감성 기반 모델과 선형 회귀, 시계열 모델의 예측 성능을 비교 분석합니다.
    5.  **데이터베이스:** 처리된 데이터를 MySQL에 저장
    6.  **API/웹:** `routes`를 통해 사용자에게 데이터 및 분석 결과 제공
- **설계 원칙:**
    - **확장성:** 새로운 기능(모듈)을 쉽게 추가할 수 있도록 블루프린트 기반으로 설계합니다.
    - **유지보수성:** 각 모듈의 역할을 명확히 하여 코드 이해 및 수정이 용이하도록 합니다.
    - **데이터 중심:** 모든 기능은 데이터에 기반하여 동작하도록 설계합니다.

## 3. 주요 데이터 스키마

- **`stock_news` (MySQL DB):**
    - `company_name`: 회사명 (VARCHAR)
    - `stock_code`: 종목코드 (VARCHAR)
    - `date`: 날짜 (DATE)
    - `close_price`: 종가 (INT)
    - `price_change`: 전일비 (INT)
    - `open_price`: 시가 (INT)
    - `high_price`: 고가 (INT)
    - `low_price`: 저가 (INT)
    - `volume`: 거래량 (INT)
    - `news_title`: 뉴스 제목 (TEXT)
    - `news_body`: 뉴스 본문 (TEXT)
    - `url`: 뉴스 링크 (VARCHAR)
    - `news_body_clean`: 전처리된 뉴스 본문 (TEXT)
    - `news_body_noun`: 명사 추출된 뉴스 본문 (TEXT)

- **`member_db` (MySQL DB):**
    - 사용자 정보 (세부 스키마는 `db.py` 참조)

## 4. 핵심 개발 작업 가이드

- **단계별 진행:**
    - 각 단계의 구현이 완료되면 `app/services/ai/analyzer.py` 스크립트를 실행하여 해당 단계의 작업을 수행합니다.
    - **1단계 완료 후:** `app/models/sentiment_dictionary.json` 파일이 생성됩니다.
    - **2단계 완료 후:** `app/models/stock_prediction_model.pkl` 파일이 생성됩니다.

- **AI/ML 기술 스택 추가 고려사항:**
    - **시계열 모델 라이브러리:** 3단계의 시계열 회귀 모델 구현 시 `statsmodels` (ARIMA, SARIMA 등) 또는 Facebook의 `Prophet` 라이브러리 도입을 고려합니다.
    - **NLP 전처리 상세화:** Konlpy를 통한 형태소 분석 후, 텍스트 데이터를 모델 입력에 적합한 형태로 변환하기 위한 벡터화 방법(예: TF-IDF, Word2Vec, FastText 등)을 2단계 구현 시 구체적으로 기획하고 적용합니다.

- **새로운 API 엔드포인트 추가:**
    1.  `app/routes/api/` 디렉토리에 새로운 Python 파일(예: `new_api.py`)을 생성합니다.
    2.  Blueprint를 정의하고 라우트 함수를 작성합니다.
    3.  `app/__init__.py`에 생성한 블루프린트를 등록합니다.

- **데이터베이스 스키마 변경:**
    1.  `db.py` 또는 관련 모델 파일을 수정합니다.
    2.  필요 시, 기존 데이터 마이그레이션 스크립트를 작성하여 실행합니다.

## 5. 현재 진행 상황 및 다음 단계

- **현재 상태:** 새로운 3단계 프로젝트 기획이 완료되었으며, `README.md`와 `GEMINI.md` 파일에 반영되었습니다.
- **다음 목표:** 새로운 기획의 **1단계인 '상관관계 기반 감성 사전 구축'**을 구현할 차례입니다. 이는 `app/services/ai/analyzer.py` 파일 내에서 `build_sentiment_dictionary` 함수를 완성하고, 이를 통해 데이터 기반의 감성 사전을 생성하는 것을 포함합니다.
